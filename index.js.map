{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nexport let page = 1;\nexport let limit = 40;\nconst axios2 = axios.create({\n    baseURL: \"https://pixabay.com/api/\",\n    params: {\n        key: \"48847177-927ba4e40b84ac1d7e4adedbb\",\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n    }\n});\n\nexport async function createRequest(q, currentPage) {\n    const res = await axios2.get(\"\", {\n        params: {\n            q,\n        per_page: limit,\n        page: currentPage\n    } });\n    return res.data.hits;\n}\n\nexport function setPage(newPage) {\n    page = newPage;\n}","export function requestMarkups(data) {\n    const { largeImageURL, webformatURL, tags, likes, views, comments, downloads } = data;\n    return `<li>\n            <div class=\"card\">\n              <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                  <img\n                    class=\"card-image\"\n                    src=\"${webformatURL}\"\n                    alt=\"${tags}\"\n                  />\n              </a>\n              <div class=\"card-content\">\n                <ul>\n                  <li><h5>Likes</h5></li>\n                  <li><p>${likes}</p></li>\n                </ul>\n                <ul>\n                  <li><h5>Views</h5></li>\n                  <li><p>${views}</p></li>\n                </ul>\n                <ul>\n                  <li><h5>Comments</h5></li>\n                  <li><p>${comments}</p></li>\n                </ul>\n                <ul>\n                  <li><h5>Downloads</h5></li>\n                  <li><p>${downloads}</p></li>\n                </ul>\n              </div>\n            </div>\n          </li>`;\n};\n\nexport function requestsMarkups(arr) {\n    return arr.map(requestMarkups).join(\"\");\n};\n\n\n","import { createRequest, page, setPage, limit } from './js/pixabay-api.js';\nimport { requestsMarkups } from './js/render-functions.js';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst refs = {\n    cardList: document.querySelector('.card-list'),\n    form: document.querySelector('.form-style'),\n    loader: document.querySelector('.loader'),\n    btnMore: document.querySelector('.btn-more')\n};\n\nlet lightbox = new SimpleLightbox('.card-list a', {\n    captionsData: \"alt\",\n    captionDelay: 250,\n});\nconst totalPages = Math.ceil(100 / limit);\n\nrefs.form.addEventListener(\"submit\", handleSubmit);\n\n\nfunction handleSubmit(e) {\n    e.preventDefault();\n    const search = e.currentTarget.elements.query.value.trim();\n\n    if (!search) {\n        iziToast.warning({\n            title: \"Warning\",\n            message: \"‚ö†Ô∏è Please enter a search query!\",\n            position: \"topRight\",\n        });\n        return;\n    }\n    \n\n    refs.cardList.innerHTML = \"\";\n\n    refs.loader.style.display = \"block\";\n    setPage(1);\n    \n\n    async function fetchImages() {\n        const currentPage = page;\n        const data = await createRequest(search, currentPage);\n        if (data.length) {\n            setPage(page + 1);\n        }\n        if (page > totalPages) {\n            return iziToast.error({\n            position: \"topRight\",\n            message: \"We're sorry, but you've reached the end of search results.\"\n            });\n        }\n        try {\n            if (!data.length) {\n            iziToast.info({\n                title: \"Not found\",\n                message: \"üò¢ No images found.\",\n                position: \"topRight\",\n            });\n                refs.loader.style.display = \"none\";\n                refs.btnMore.style.display = \"none\";\n            refs.cardList.innerHTML = \"\";\n\n            return;\n            }\n            if (page > 1) {\n                refs.btnMore.style.display = \"block\";\n                refs.btnMore.addEventListener(\"click\", fetchImages);\n            }\n            refs.cardList.insertAdjacentHTML(\"beforeend\", requestsMarkups(data));\n\n            const cardHeight = document.querySelector(\".card-list .card\").getBoundingClientRect().height;\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: \"smooth\"\n            });\n\n            lightbox.refresh();\n        }\n        catch (error) {\n            iziToast.error({\n                    title: \"Error\",\n                    message: \"üö® Something went wrong. Please try again!\",\n                    position: \"topRight\",\n                });\n                refs.loader.style.display = \"none\";\n                refs.btnMore.style.display = \"none\";\n                console.error(\"‚ùå API request error:\", error);\n\n                refs.cardList.innerHTML = \"\";}\n        finally{\n            refs.loader.style.display = \"none\";\n        };\n    }\n\n    fetchImages();\n\n    e.currentTarget.reset();\n}\n"],"names":["page","limit","axios2","axios","createRequest","q","currentPage","setPage","newPage","requestMarkups","data","largeImageURL","webformatURL","tags","likes","views","comments","downloads","requestsMarkups","arr","refs","lightbox","SimpleLightbox","totalPages","handleSubmit","e","search","iziToast","fetchImages","cardHeight","error"],"mappings":"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"}