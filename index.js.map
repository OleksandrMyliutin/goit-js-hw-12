{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nexport let page = 1;\nexport let limit = 40;\nexport let totalHits = 0;\n\nconst axios2 = axios.create({\n    baseURL: \"https://pixabay.com/api/\",\n    params: {\n        key: \"48847177-927ba4e40b84ac1d7e4adedbb\",\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n    }\n});\n\nexport async function createRequest(q, currentPage) {\n    const res = await axios2.get(\"\", {\n        params: {\n            q,\n            per_page: limit,\n            page: currentPage\n        }\n    });\n    \n    totalHits = res.data.totalHits; // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–≥–∞–ª—å–Ω–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ\n    return res.data.hits;\n}\n\nexport function setPage(newPage) {\n    page = newPage;\n}\n","export function requestMarkups(data) {\n    const { largeImageURL, webformatURL, tags, likes, views, comments, downloads } = data;\n    return `<li>\n            <div class=\"card\">\n              <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                  <img\n                    class=\"card-image\"\n                    src=\"${webformatURL}\"\n                    alt=\"${tags}\"\n                  />\n              </a>\n              <div class=\"card-content\">\n                <ul>\n                  <li><h5>Likes</h5></li>\n                  <li><p>${likes}</p></li>\n                </ul>\n                <ul>\n                  <li><h5>Views</h5></li>\n                  <li><p>${views}</p></li>\n                </ul>\n                <ul>\n                  <li><h5>Comments</h5></li>\n                  <li><p>${comments}</p></li>\n                </ul>\n                <ul>\n                  <li><h5>Downloads</h5></li>\n                  <li><p>${downloads}</p></li>\n                </ul>\n              </div>\n            </div>\n          </li>`;\n};\n\nexport function requestsMarkups(arr) {\n    return arr.map(requestMarkups).join(\"\");\n};\n\n\n","import { createRequest, page, setPage, limit, totalHits } from './js/pixabay-api.js';\nimport { requestsMarkups } from './js/render-functions.js';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst refs = {\n    cardList: document.querySelector('.card-list'),\n    form: document.querySelector('.form-style'),\n    loader: document.querySelector('.loader'),\n    btnMore: document.querySelector('.btn-more')\n};\n\nlet lightbox = new SimpleLightbox('.card-list a', {\n    captionsData: \"alt\",\n    captionDelay: 250,\n});\n\nlet searchQuery = \"\";\n\nrefs.form.addEventListener(\"submit\", handleSubmit);\nrefs.btnMore.addEventListener(\"click\", () => fetchImages(searchQuery));\nrefs.btnMore.style.display = \"none\";\n\nasync function handleSubmit(e) {\n    e.preventDefault();\n    const search = e.currentTarget.elements.query.value.trim();\n\n    if (!search) {\n        iziToast.warning({\n            title: \"Warning\",\n            message: \"‚ö†Ô∏è Please enter a search query!\",\n            position: \"topRight\",\n        });\n        return;\n    }\n\n    searchQuery = search; // –û–Ω–æ–≤–ª—é—î–º–æ –≥–ª–æ–±–∞–ª—å–Ω–∏–π –ø–æ—à—É–∫–æ–≤–∏–π –∑–∞–ø–∏—Ç\n    refs.cardList.innerHTML = \"\";\n    refs.loader.style.display = \"block\";\n    refs.btnMore.style.display = \"none\";\n\n    setPage(1);\n    await fetchImages(searchQuery, true); // –ü–µ—Ä—à–∏–π –ø–æ—à—É–∫\n\n    e.currentTarget.reset();\n}\n\nasync function fetchImages(search, isNewSearch = false) {\n    refs.loader.style.display = \"block\";\n    const currentPage = page;\n\n    try {\n        const data = await createRequest(search, currentPage);\n\n        if (!data.length) {\n            iziToast.info({\n                title: \"Not found\",\n                message: \"üò¢ No images found.\",\n                position: \"topRight\",\n            });\n            refs.loader.style.display = \"none\";\n            refs.btnMore.style.display = \"none\";\n            refs.cardList.innerHTML = \"\";\n            return;\n        }\n\n        // –Ø–∫—â–æ —Ü–µ –Ω–æ–≤–∏–π –ø–æ—à—É–∫ ‚Äî –æ—á–∏—â–∞—î–º–æ –≥–∞–ª–µ—Ä–µ—é\n        if (isNewSearch) {\n            refs.cardList.innerHTML = \"\";\n        }\n\n        // –î–æ–¥–∞—î–º–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤ UL –±–µ–∑ –¥–æ–¥–∞—Ç–∫–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞\n        refs.cardList.insertAdjacentHTML(\"beforeend\", requestsMarkups(data));\n\n        lightbox.refresh();\n\n        // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∏\n        const cardHeight = document.querySelector(\".card-list .card\")?.getBoundingClientRect().height || 0;\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: \"smooth\"\n        });\n\n        // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏\n        setPage(page + 1);\n\n        // –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–Ω–æ–ø–∫–∏ \"Load more\"\n        if (page * limit >= totalHits) {\n            refs.btnMore.style.display = \"none\";\n            iziToast.info({\n                title: \"End of results\",\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n            });\n        } else {\n            refs.btnMore.style.display = \"block\";\n        }\n    }\n    catch (error) {\n        iziToast.error({\n            title: \"Error\",\n            message: \"üö® Something went wrong. Please try again!\",\n            position: \"topRight\",\n        });\n        console.error(\"‚ùå API request error:\", error);\n    }\n    finally {\n        refs.loader.style.display = \"none\";\n    }\n}\n"],"names":["page","limit","totalHits","axios2","axios","createRequest","q","currentPage","res","setPage","newPage","requestMarkups","data","largeImageURL","webformatURL","tags","likes","views","comments","downloads","requestsMarkups","arr","refs","lightbox","SimpleLightbox","searchQuery","handleSubmit","fetchImages","e","search","iziToast","isNewSearch","cardHeight","_a","error"],"mappings":"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"}